Role Name
=========

Bootstrapping a cluster of Redis servers in high avaliability mode using Sentinel.

Requirements
------------

1. In the inventory, all replica server have to placed in the group called: `redis_replica`

2. The cluster has to be made of at least 3 servers.

## If the sofware is already installed

1. Inside each server in the file `/etc/redis-sentinel.conf` delete everything that comes after the:

        # Generated by CONFIG REWRITE

2. Inside each server in the file `/etc/redis-sentinel.conf` check that all sentinel ID are diferent across all the servers:

        `sentinel myid <ID>`

Role Variables
--------------

- `redis_port`: port on which to expose the redis server.
  
  Default value: 6379

- `redis_leader_ip`: ip of the leader Redis cluster.

  No default value.

- `sentinel_replicaset_name`: name of the Sentinel replicaset.

  Default value: redis_replica

- `sentinel_consensus`: minimum number of server needed to reach consensus. 
  Has to be an int greater than 2.

  Default value: 2

Dependencies
------------

None

Example Playbook
----------------

Example of how to use your role:

    - hosts: all
      roles:
        - role: redis_sentinel_cluster
          vars:
            redis_port: 6379
            redis_leader_ip: 192.168.56.10
            sentinel_replicaset_name: redis_replica
            sentinel_consensus: 2

License
-------

BSD

Author Information
------------------

[Mattia Rubini](mattiarubini.com)
